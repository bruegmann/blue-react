import{r as t,e as L,j as e,g as C}from"./index-JDX1GDYo.js";function A({modalContent:c,modalTitle:E,modalIcon:M,unSetModalContent:m,onSubmit:l,defaultInput:n,type:d,inputType:y="text",switchPrimaryBtn:N=!1,acceptBtnText:r,cancelBtnText:f}){const x=t.useRef(null),[P,S]=t.useState(n||""),v=()=>{m(),l&&l(null)},h=()=>{m(),l&&l(!1)},g=s=>{s.preventDefault(),l&&l(P||!0)},u={maxWidth:"10rem"},k=()=>{const s=x.current;s.removeEventListener("shown.bs.modal",k);const o=s.querySelector(".btn-primary, .form-control");o&&o.focus()};return t.useEffect(()=>{S(n||"")},[n]),t.useEffect(()=>{const s=x.current;let o=L.getInstance(s);o?(c!==void 0?o.show():o.hide(),s.addEventListener("shown.bs.modal",k)):(o=new L(s),o.hide(),s.addEventListener("hidden.bs.modal",()=>{v()}))},[c]),e.jsx("div",{className:"modal",ref:x,tabIndex:-1,children:e.jsx("div",{className:"modal-dialog",children:e.jsx("div",{className:"modal-content",children:e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"modal-header align-items-center",children:[M!==void 0&&e.jsx("div",{className:"me-2",children:M}),e.jsx("h5",{className:"modal-title",children:E||C("Message")}),e.jsx("button",{type:"button",className:"btn-close",onClick:v})]}),e.jsxs("div",{className:"modal-body",style:{whiteSpace:"pre-wrap"},children:[c,d==="ask"&&e.jsx("input",{type:y,className:"form-control mt-1",value:P,onChange:({target:s})=>S(s.value),autoFocus:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"submit",className:`btn ${N?"btn-outline-primary":"btn-primary"} d-block w-100`,style:u,children:d==="verify"?r||C("Yes"):r||"OK"}),(d==="ask"||d==="verify")&&(d==="verify"?e.jsx("button",{type:"button",className:`btn ${N?"btn-primary":"btn-outline-primary"} d-block w-100`,style:u,onClick:h,children:f||C("No")}):e.jsx("button",{type:"button",className:"btn btn-outline-primary d-block w-100",style:u,onClick:v,children:f||C("Cancel")}))]})]})})})})}const R=t.createContext({ask:void 0,tell:void 0,verify:void 0}),W=({children:c,...E})=>{const[M,m]=t.useState("tell"),[l,n]=t.useState(),[d,y]=t.useState(),[N,r]=t.useState(),[f,x]=t.useState(),[P,S]=t.useState(),[v,h]=t.useState(!1),[g,u]=t.useState(),[k,s]=t.useState(),o=t.useCallback(()=>{n(void 0)},[n]),[$,I]=t.useState(),D=(p,i)=>new Promise(b=>{if(m("ask"),n(p),i){const{title:a,icon:w,inputType:j,switchPrimaryBtn:B,acceptBtnText:T,cancelBtnText:q}=i;y(a),r(w),S(j),h(B),u(T),s(q)}x(""),I(()=>a=>{b(a),n(void 0),x(void 0)})}),F=(p,i)=>new Promise(b=>{if(m("tell"),n(p),i){const{title:a,icon:w,switchPrimaryBtn:j,acceptBtnText:B,cancelBtnText:T}=i;y(a),r(w),h(j),u(B),s(T)}I(()=>a=>{b(!!a),n(void 0)})}),O=(p,i)=>new Promise(b=>{if(m("verify"),n(p),i){const{title:a,icon:w,switchPrimaryBtn:j,acceptBtnText:B,cancelBtnText:T}=i;y(a),r(w),h(j),u(B),s(T)}I(()=>a=>{b(!!a),n(void 0)})});return e.jsxs(R.Provider,{value:{ask:D,tell:F,verify:O},...E,children:[c,e.jsx(A,{modalContent:l,modalTitle:d,modalIcon:N,unSetModalContent:o,onSubmit:$,defaultInput:f,type:M,inputType:P,switchPrimaryBtn:v,acceptBtnText:g,cancelBtnText:k})]})},Y=()=>{const c=t.useContext(R);if(c===void 0)throw new Error("useModal must be used within a ModalProvider");return c};export{W as M,Y as u};
